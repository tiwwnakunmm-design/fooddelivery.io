<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ - FoodExpress</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/main.css">
</head>
<body>
  <header id="main-header"></header>
  <div class="container">
    <div style="text-align:center;margin:3rem 0;"><h1>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h1></div>
    <div id="tracking-container"></div>
  </div>
  <footer id="main-footer"></footer>
  <script src="../js/main.js"></script>
  <script>
    const timelineSteps=[{status:'pending',icon:'üìù',title:'‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå'},{status:'confirmed',icon:'‚úÖ',title:'‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß'},{status:'preparing',icon:'üë®‚Äçüç≥',title:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£'},{status:'delivering',icon:'üõµ',title:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á'},{status:'completed',icon:'üéâ',title:'‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡πâ‡∏ß'}];
    const statusMessages={pending:{icon:'‚è≥',text:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå...'},confirmed:{icon:'‚úì',text:'‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß'},preparing:{icon:'üë®‚Äçüç≥',text:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£'},delivering:{icon:'üõµ',text:'‡πÑ‡∏£‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á'},completed:{icon:'‚úÖ',text:'‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢'},cancelled:{icon:'‚ùå',text:'‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå'}};
    function getOrderFromUrl(){const params=new URLSearchParams(window.location.search),orderId=params.get('order');if(!orderId){window.location.href='orders.html';return null}const order=getOrders().find(o=>o.id===orderId);if(!order){window.location.href='orders.html';return null}return order}
    function renderTracking(){const order=getOrderFromUrl();if(!order)return;const container=document.getElementById('tracking-container'),statusMessage=statusMessages[order.status],currentStepIndex=timelineSteps.findIndex(s=>s.status===order.status);container.innerHTML=`<div style="background:#fff;border-radius:16px;padding:3rem;box-shadow:0 2px 8px rgba(0,0,0,0.08);max-width:800px;margin:0 auto;"><div style="text-align:center;margin-bottom:3rem;padding-bottom:2rem;border-bottom:2px solid #F5F5F5;"><div style="font-size:1.5rem;font-weight:700;margin-bottom:0.5rem;">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #${order.id}</div><div style="color:#666;">${formatDate(order.date)}</div></div><div style="background:linear-gradient(135deg,#E63946,#FF6B35);color:#fff;padding:2rem;border-radius:12px;text-align:center;margin-bottom:3rem;"><div style="font-size:4rem;margin-bottom:1rem;">${statusMessage.icon}</div><div style="font-size:1.5rem;font-weight:600;">${statusMessage.text}</div></div><div style="position:relative;padding:1.5rem 0;">${timelineSteps.map((step,index)=>{const isCompleted=index<currentStepIndex,isActive=index===currentStepIndex;return`<div style="display:flex;gap:1.5rem;margin-bottom:2rem;position:relative;"><div style="width:40px;height:40px;border-radius:50%;background:${isCompleted?'#10B981':isActive?'linear-gradient(135deg,#FFD93D,#FFC857)':'#E5E5E5'};display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;z-index:1;${isActive?'box-shadow:0 0 0 4px rgba(255,217,61,0.2);':''}color:${isCompleted?'#fff':'#1A1A1A'};">${isCompleted?'‚úì':step.icon}</div><div style="position:absolute;left:19px;top:40px;bottom:-16px;width:2px;background:${isCompleted?'#10B981':'#E5E5E5'};${index===timelineSteps.length-1?'display:none;':''}"></div><div style="flex:1;padding-top:4px;"><div style="font-weight:600;margin-bottom:4px;">${step.title}</div>${isCompleted||isActive?`<div style="font-size:0.9rem;color:#666;">${new Date().toLocaleTimeString('th-TH',{hour:'2-digit',minute:'2-digit'})}</div>`:''}</div></div>`}).join('')}</div>${order.status==='delivering'?'<div style="background:linear-gradient(135deg,#FFF9E6,#FFE6CC);padding:1.5rem;border-radius:12px;margin-top:2rem;display:flex;align-items:center;gap:1.5rem;"><div style="width:60px;height:60px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;">üèçÔ∏è</div><div style="flex:1;"><div style="font-weight:600;margin-bottom:4px;">‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ</div><div style="font-size:0.9rem;color:#666;">‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå - ‡∏Å‡∏Ç 1234</div></div><button style="background:#E63946;color:#fff;padding:10px 20px;border-radius:12px;font-weight:600;border:none;cursor:pointer;">üìû ‡πÇ‡∏ó‡∏£</button></div>':''}< div style="background:#F9F9F9;padding:2rem;border-radius:12px;margin-top:3rem;"><h3 style="margin-bottom:1.5rem;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3><div style="display:flex;justify-content:space-between;padding:1rem 0;border-bottom:1px solid #E5E5E5;"><span style="color:#666;">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö:</span><span style="font-weight:600;">${order.receiverName}</span></div><div style="display:flex;justify-content:space-between;padding:1rem 0;border-bottom:1px solid #E5E5E5;"><span style="color:#666;">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</span><span style="font-weight:600;">${order.phone}</span></div><div style="display:flex;justify-content:space-between;padding:1rem 0;border-bottom:1px solid #E5E5E5;"><span style="color:#666;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</span><span style="font-weight:600;">${order.address}</span></div><div style="display:flex;justify-content:space-between;padding:1rem 0;"><span style="color:#666;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span><span style="font-weight:600;color:#E63946;">${formatPrice(order.total)}</span></div></div></div>`}
    renderTracking();
  </script>
</body>
</html>
